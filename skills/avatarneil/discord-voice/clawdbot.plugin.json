{
  "id": "discord-voice",
  "name": "Discord语音",
  "description": "在Discord语音频道中进行实时语音对话",
  "configSchema": {
    "type": "object",
    "additionalProperties": false,
    "properties": {
      "enabled": {
        "type": "boolean",
        "default": true
      },
      "sttProvider": {
        "type": "string",
        "enum": ["whisper", "deepgram"],
        "default": "whisper"
      },
      "streamingSTT": {
        "type": "boolean",
        "default": true,
        "description": "使用流式STT以降低延迟(仅Deepgram)"
      },
      "ttsProvider": {
        "type": "string",
        "enum": ["openai", "elevenlabs"],
        "default": "openai"
      },
      "ttsVoice": {
        "type": "string",
        "default": "nova"
      },
      "vadSensitivity": {
        "type": "string",
        "enum": ["low", "medium", "high"],
        "default": "medium"
      },
      "bargeIn": {
        "type": "boolean",
        "default": true,
        "description": "用户开始说话时停止说话"
      },
      "model": {
        "type": "string",
        "description": "语音响应的LLM模型(例如 anthropic/claude-3-5-haiku-latest)"
      },
      "thinkLevel": {
        "type": "string",
        "enum": ["off", "low", "medium", "high"],
        "default": "off",
        "description": "语音响应的思考级别(越低越快)"
      },
      "allowedUsers": {
        "type": "array",
        "items": { "type": "string" },
        "default": []
      },
      "silenceThresholdMs": {
        "type": "number",
        "default": 1500
      },
      "minAudioMs": {
        "type": "number",
        "default": 500
      },
      "maxRecordingMs": {
        "type": "number",
        "default": 30000
      },
      "heartbeatIntervalMs": {
        "type": "number",
        "default": 30000,
        "description": "连接健康检查间隔(毫秒)"
      },
      "autoJoinChannel": {
        "type": "string",
        "description": "启动时自动加入的语音频道ID"
      },
      "openai": {
        "type": "object",
        "properties": {
          "apiKey": { "type": "string" },
          "whisperModel": { "type": "string", "default": "whisper-1" },
          "ttsModel": { "type": "string", "default": "tts-1" }
        }
      },
      "elevenlabs": {
        "type": "object",
        "properties": {
          "apiKey": { "type": "string" },
          "voiceId": { "type": "string" },
          "modelId": { "type": "string", "default": "eleven_multilingual_v2" }
        }
      },
      "deepgram": {
        "type": "object",
        "properties": {
          "apiKey": { "type": "string" },
          "model": { "type": "string", "default": "nova-2" }
        }
      }
    }
  },
  "uiHints": {
    "enabled": {
      "label": "启用Discord语音",
      "help": "在Discord语音频道中启用实时语音对话"
    },
    "sttProvider": {
      "label": "语音转文本提供商",
      "help": "使用 'whisper'(OpenAI) 或 'deepgram'"
    },
    "ttsProvider": {
      "label": "文本转语音提供商",
      "help": "使用 'openai' 或 'elevenlabs'"
    },
    "ttsVoice": {
      "label": "TTS语音",
      "help": "TTS的语音ID(例如OpenAI的 'nova'、'alloy')"
    },
    "vadSensitivity": {
      "label": "VAD灵敏度",
      "help": "语音活动检测灵敏度(低/中等/高)"
    },
    "allowedUsers": {
      "label": "允许的用户",
      "help": "允许使用语音的Discord用户ID(为空 = 全部允许)"
    },
    "openai.apiKey": {
      "label": "OpenAI API密钥",
      "sensitive": true
    },
    "elevenlabs.apiKey": {
      "label": "ElevenLabs API密钥",
      "sensitive": true
    },
    "deepgram.apiKey": {
      "label": "Deepgram API密钥",
      "sensitive": true
    }
  }
}
